<Window x:Class="ElectricCalculation.Views.SaveSnapshotWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:behaviors="clr-namespace:ElectricCalculation.Behaviors"
        Title="Bộ dữ liệu"
        WindowStartupLocation="CenterOwner"
        SizeToContent="WidthAndHeight"
        ResizeMode="NoResize"
        WindowStyle="ToolWindow"
        behaviors:DialogCloser.DialogResult="{Binding DialogResult}">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility" />
    </Window.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0"
                   TextWrapping="Wrap"
                   MaxWidth="420"
                   Margin="0,0,0,12">
            <Run Text="Bạn có muốn lưu bộ dữ liệu trước khi thoát không?" />
            <LineBreak />
            <Run Text="Kỳ tính: " /><Run Text="{Binding PeriodLabel}" />
            <LineBreak />
            <Run Text="Số khách: " /><Run Text="{Binding CustomerCount}" />
        </TextBlock>

        <StackPanel Grid.Row="1" Margin="0,0,0,12">
            <TextBlock Text="Tên bộ dữ liệu (tùy chọn):" Margin="0,0,0,6" />
            <TextBox Width="420"
                     Text="{Binding SnapshotName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
        </StackPanel>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Lưu mới"
                    MinWidth="110"
                    Margin="0,0,8,0"
                    IsDefault="True"
                    Command="{Binding SaveNewCommand}" />
            <Button Content="Ghi đè"
                    MinWidth="90"
                    Margin="0,0,8,0"
                    Visibility="{Binding CanOverwrite, Converter={StaticResource BoolToVisibility}}"
                    Command="{Binding OverwriteCommand}" />
            <Button Content="Không lưu"
                    MinWidth="90"
                    Margin="0,0,8,0"
                    Command="{Binding DontSaveCommand}" />
            <Button Content="Hủy"
                    MinWidth="80"
                    Click="Cancel_Click" />
        </StackPanel>
    </Grid>
</Window>
