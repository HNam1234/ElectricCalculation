<Window x:Class="ElectricCalculation.Views.NewDatasetOptionsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:behaviors="clr-namespace:ElectricCalculation.Behaviors"
        mc:Ignorable="d"
        Title="Tạo bộ dữ liệu mới"
        WindowStartupLocation="CenterOwner"
        SizeToContent="WidthAndHeight"
        ResizeMode="NoResize"
        WindowStyle="ToolWindow"
        ShowInTaskbar="False"
        Background="#F7F7F7"
        UseLayoutRounding="True"
        SnapsToDevicePixels="True"
        behaviors:DialogCloser.DialogResult="{Binding DialogResult}">
    <Window.Resources>
        <SolidColorBrush x:Key="CardBg" Color="#FFFFFFFF" />
        <SolidColorBrush x:Key="CardBorder" Color="#FFE5E7EB" />
        <SolidColorBrush x:Key="TextPrimary" Color="#FF111827" />
        <SolidColorBrush x:Key="TextSecondary" Color="#FF4B5563" />
        <SolidColorBrush x:Key="TextMuted" Color="#FF6B7280" />
        <SolidColorBrush x:Key="HoverBg" Color="#FFF3F4F6" />
        <SolidColorBrush x:Key="PressedBg" Color="#FFE5E7EB" />
        <SolidColorBrush x:Key="Accent" Color="#FF2563EB" />

        <DropShadowEffect x:Key="CardShadow"
                          BlurRadius="18"
                          ShadowDepth="2"
                          Opacity="0.18"
                          Color="#000000" />

        <Style x:Key="ChoiceCardButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="{StaticResource CardBg}" />
            <Setter Property="BorderBrush" Value="{StaticResource CardBorder}" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="14" />
            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="14"
                                SnapsToDevicePixels="True">
                            <ContentPresenter Margin="{TemplateBinding Padding}" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource HoverBg}" />
                                <Setter Property="BorderBrush" Value="#FFC7D2FE" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{StaticResource PressedBg}" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.55" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="IconBadgeStyle" TargetType="{x:Type Border}">
            <Setter Property="Width" Value="44" />
            <Setter Property="Height" Value="44" />
            <Setter Property="CornerRadius" Value="14" />
            <Setter Property="Background" Value="#FFEFF6FF" />
            <Setter Property="BorderBrush" Value="#FFD6E4FF" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>

        <Style x:Key="IconGlyphStyle" TargetType="{x:Type TextBlock}">
            <Setter Property="FontFamily" Value="Segoe MDL2 Assets" />
            <Setter Property="FontSize" Value="22" />
            <Setter Property="Foreground" Value="{StaticResource Accent}" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="HorizontalAlignment" Value="Center" />
        </Style>

        <Style x:Key="SmallTextButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="10,6" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="10"
                                SnapsToDevicePixels="True">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="{TemplateBinding Padding}" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource HoverBg}" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{StaticResource PressedBg}" />
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.55" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="18">
        <Border Background="{StaticResource CardBg}"
                BorderBrush="{StaticResource CardBorder}"
                BorderThickness="1"
                CornerRadius="16"
                Padding="18"
                Effect="{StaticResource CardShadow}">
            <Grid Width="520">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="0,0,0,14">
                    <TextBlock Text="Tạo bộ dữ liệu mới"
                               Foreground="{StaticResource TextPrimary}"
                               FontSize="18"
                               FontWeight="SemiBold" />
                    <TextBlock Text="Chọn cách tạo bộ dữ liệu:"
                               Foreground="{StaticResource TextSecondary}"
                               Margin="0,4,0,0" />
                </StackPanel>

                <Button Grid.Row="1"
                        Style="{StaticResource ChoiceCardButtonStyle}"
                        Margin="0,0,0,12"
                        Command="{Binding ChooseManualEntryCommand}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Border Style="{StaticResource IconBadgeStyle}">
                            <TextBlock Style="{StaticResource IconGlyphStyle}" Text="&#xE70F;" />
                        </Border>

                        <StackPanel Grid.Column="1" Margin="14,0,0,0">
                            <TextBlock Text="Nhập tay"
                                       Foreground="{StaticResource TextPrimary}"
                                       FontSize="14"
                                       FontWeight="SemiBold" />
                            <TextBlock Text="Chỉ dùng cho bộ dữ liệu nhỏ (≤ 10 công tơ)."
                                       Foreground="{StaticResource TextMuted}"
                                       Margin="0,4,0,0"
                                       TextWrapping="Wrap" />
                        </StackPanel>
                    </Grid>
                </Button>

                <Button Grid.Row="2"
                        Style="{StaticResource ChoiceCardButtonStyle}"
                        Command="{Binding ChooseImportFromExcelCommand}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Border Style="{StaticResource IconBadgeStyle}">
                            <TextBlock Style="{StaticResource IconGlyphStyle}" Text="&#xE8A5;" />
                        </Border>

                        <StackPanel Grid.Column="1" Margin="14,0,0,0">
                            <TextBlock Text="Import từ Excel"
                                       Foreground="{StaticResource TextPrimary}"
                                       FontSize="14"
                                       FontWeight="SemiBold" />
                            <TextBlock Text="Chọn file Excel để nhập dữ liệu nhanh và chính xác."
                                       Foreground="{StaticResource TextMuted}"
                                       Margin="0,4,0,0"
                                       TextWrapping="Wrap" />
                        </StackPanel>

                        <Border Grid.Column="2"
                                Background="#FFEEF2FF"
                                BorderBrush="#FFC7D2FE"
                                BorderThickness="1"
                                CornerRadius="999"
                                Padding="10,4"
                                VerticalAlignment="Top">
                            <TextBlock Text="Khuyến nghị"
                                       Foreground="{StaticResource Accent}"
                                       FontWeight="SemiBold"
                                       FontSize="11" />
                        </Border>
                    </Grid>
                </Button>

                <DockPanel Grid.Row="3" Margin="0,16,0,0" LastChildFill="False">
                    <Button DockPanel.Dock="Right"
                            Content="Hủy"
                            IsCancel="True"
                            Style="{StaticResource SmallTextButtonStyle}"
                            Command="{Binding CancelCommand}" />
                </DockPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
